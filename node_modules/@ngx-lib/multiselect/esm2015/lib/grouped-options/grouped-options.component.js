/**
 * @fileoverview added by tsickle
 * Generated from: lib/grouped-options/grouped-options.component.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, ChangeDetectionStrategy, Output, EventEmitter, TemplateRef, ViewChild } from '@angular/core';
import { NgxMultiselectService } from '../services/multiselect.service';
export class GroupedOptionsComponent {
    /**
     * @param {?} multiselectService
     */
    constructor(multiselectService) {
        this.multiselectService = multiselectService;
        this._options = [];
        this._selectedOptions = [];
        this.groupedOptions = [];
        this.start = 0;
        this.end = 5;
        this.disabled = false;
        this.multiple = false;
        this.selectGroup = new EventEmitter();
        this.selectOption = new EventEmitter();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set selectedOptions(value) {
        this._selectedOptions = value;
        this.formGroupOptions(this._options, this._selectedOptions);
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set options(value) {
        this._options = value;
        this.formGroupOptions(value, this._selectedOptions);
    }
    /**
     * @return {?}
     */
    get options() {
        return this.groupedOptions;
    }
    // TODO: Refactor below logic
    /**
     * @param {?} collection
     * @param {?} selectedOptions
     * @return {?}
     */
    formGroupOptions(collection, selectedOptions) {
        /** @type {?} */
        let selectedIds = this.multiple ?
            (selectedOptions || []).map((/**
             * @param {?} s
             * @return {?}
             */
            s => s.id)) :
            selectedOptions ? [selectedOptions.id]
                : [];
        /** @type {?} */
        const values = collection.map((/**
         * @param {?} v
         * @return {?}
         */
        v => (Object.assign(Object.assign({}, v), { ticked: !v.isGroup ? selectedIds.indexOf(v.id) !== -1 : v.ticked }))));
        this.groupedOptions = this.multiselectService.virtualOptionsGroupingFlatten(values, this.groupedProperty);
        this.updateRange({ start: this.start, end: this.end });
    }
    /**
     * @param {?} option
     * @return {?}
     */
    getOptionStyle(option) {
        return {
            group: option.isGroup,
            marked: option.ticked,
            disabled: this.disabled || option.disabled
        };
    }
    /**
     * @param {?} _
     * @param {?} option
     * @return {?}
     */
    trackByFn(_, option) {
        return option.id;
    }
    /**
     * @param {?} __0
     * @return {?}
     */
    updateRange({ start, end }) {
        this.start = start;
        this.end = end;
        this.filteredOptions = [...this.options].slice(start, end);
    }
    /**
     * @param {?} option
     * @return {?}
     */
    select(option) {
        if (!option.isGroup) {
            this.selectOption.emit(option);
        }
        else {
            option.ticked = !option.ticked;
            /** @type {?} */
            const values = this.multiselectService.collectAllDescendants(this.options, this.groupedProperty, option.name);
            this.selectGroup.emit(Object.assign(Object.assign({}, option), { values: values }));
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    ngOnChanges() {
        if (!this.optionsTemplate) {
            this.optionsTemplate = this.defaultOptionsTemplate;
        }
    }
}
GroupedOptionsComponent.decorators = [
    { type: Component, args: [{
                selector: 'ms-grouped-options',
                template: "<div class=\"options-container\" msVirtualScroll [totalCount]=\"options.length\" (rangeChanged)=\"updateRange($event)\">\n  <div #top class=\"top\"></div>\n  <ng-container *ngIf=\"filteredOptions.length; else noOptions\">\n    <div\n      class=\"option\"\n      [ngStyle]=\"{ marginLeft: option.depth * 15 + 'px' }\"\n      [ngClass]=\"getOptionStyle(option)\"\n      *ngFor=\"let option of filteredOptions; trackBy: trackByFn\"\n      (click)=\"select(option)\"\n    >\n      <ng-container\n        *ngTemplateOutlet=\"\n          optionsTemplate;\n          context: {\n            option: option\n          }\n        \"\n      ></ng-container>\n    </div>\n  </ng-container>\n  <div #bottom class=\"bottom\"></div>\n</div>\n<ng-template #defaultOptionsTemplate let-option=\"option\">\n  {{ option?.name }}\n</ng-template>\n<ng-template #noOptions let-option=\"option\">\n  <div class=\"option message\">\n    No options available.\n  </div>\n</ng-template>\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                styles: [""]
            }] }
];
/** @nocollapse */
GroupedOptionsComponent.ctorParameters = () => [
    { type: NgxMultiselectService }
];
GroupedOptionsComponent.propDecorators = {
    groupedProperty: [{ type: Input }],
    disabled: [{ type: Input }],
    multiple: [{ type: Input }],
    selectedOptions: [{ type: Input }],
    optionsTemplate: [{ type: Input }],
    options: [{ type: Input }],
    selectGroup: [{ type: Output }],
    selectOption: [{ type: Output }],
    defaultOptionsTemplate: [{ type: ViewChild, args: ['defaultOptionsTemplate', { static: true },] }]
};
if (false) {
    /** @type {?} */
    GroupedOptionsComponent.prototype._options;
    /** @type {?} */
    GroupedOptionsComponent.prototype._selectedOptions;
    /** @type {?} */
    GroupedOptionsComponent.prototype.groupedOptions;
    /** @type {?} */
    GroupedOptionsComponent.prototype.start;
    /** @type {?} */
    GroupedOptionsComponent.prototype.end;
    /** @type {?} */
    GroupedOptionsComponent.prototype.filteredOptions;
    /** @type {?} */
    GroupedOptionsComponent.prototype.groupedProperty;
    /** @type {?} */
    GroupedOptionsComponent.prototype.disabled;
    /** @type {?} */
    GroupedOptionsComponent.prototype.multiple;
    /** @type {?} */
    GroupedOptionsComponent.prototype.optionsTemplate;
    /** @type {?} */
    GroupedOptionsComponent.prototype.selectGroup;
    /** @type {?} */
    GroupedOptionsComponent.prototype.selectOption;
    /** @type {?} */
    GroupedOptionsComponent.prototype.defaultOptionsTemplate;
    /** @type {?} */
    GroupedOptionsComponent.prototype.multiselectService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JvdXBlZC1vcHRpb25zLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIvVXNlcnMvcGFua2FqcGFya2FyL0RvY3VtZW50cy9HaXRIdWIvbXVsdGlzZWxlY3QvcHJvamVjdHMvbXVsdGlzZWxlY3Qvc3JjLyIsInNvdXJjZXMiOlsibGliL2dyb3VwZWQtb3B0aW9ucy9ncm91cGVkLW9wdGlvbnMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxLQUFLLEVBQ0wsdUJBQXVCLEVBQ3ZCLE1BQU0sRUFDTixZQUFZLEVBQ1osV0FBVyxFQUNYLFNBQVMsRUFFVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQVF4RSxNQUFNLE9BQU8sdUJBQXVCOzs7O0lBNkJsQyxZQUFtQixrQkFBeUM7UUFBekMsdUJBQWtCLEdBQWxCLGtCQUFrQixDQUF1QjtRQTVCNUQsYUFBUSxHQUFHLEVBQUUsQ0FBQztRQUNkLHFCQUFnQixHQUFHLEVBQUUsQ0FBQztRQUN0QixtQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUNwQixVQUFLLEdBQVcsQ0FBQyxDQUFDO1FBQ2xCLFFBQUcsR0FBVyxDQUFDLENBQUM7UUFJUCxhQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLGFBQVEsR0FBRyxLQUFLLENBQUM7UUFjaEIsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3RDLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztJQUljLENBQUM7Ozs7O0lBbEJoRSxJQUFhLGVBQWUsQ0FBQyxLQUFLO1FBQ2hDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFDOUIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDOUQsQ0FBQzs7Ozs7SUFFRCxJQUFhLE9BQU8s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LHNCQUFzQixDQUFDO1NBQ3BEO0lBQ0gsQ0FBQzs7O1lBekZGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsb0JBQW9CO2dCQUM5QiwrOEJBQStDO2dCQUUvQyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTs7YUFDaEQ7Ozs7WUFQUSxxQkFBcUI7Ozs4QkFnQjNCLEtBQUs7dUJBQ0wsS0FBSzt1QkFDTCxLQUFLOzhCQUNMLEtBQUs7OEJBSUwsS0FBSztzQkFDTCxLQUFLOzBCQVFMLE1BQU07MkJBQ04sTUFBTTtxQ0FFTixTQUFTLFNBQUMsd0JBQXdCLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFOzs7O0lBMUJyRCwyQ0FBYzs7SUFDZCxtREFBc0I7O0lBQ3RCLGlEQUFvQjs7SUFDcEIsd0NBQWtCOztJQUNsQixzQ0FBZ0I7O0lBQ2hCLGtEQUFnQjs7SUFFaEIsa0RBQWlDOztJQUNqQywyQ0FBMEI7O0lBQzFCLDJDQUEwQjs7SUFLMUIsa0RBQTJDOztJQVMzQyw4Q0FBZ0Q7O0lBQ2hELCtDQUFpRDs7SUFFakQseURBQWdHOztJQUVwRixxREFBZ0QiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIE9uSW5pdCxcbiAgSW5wdXQsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBPdXRwdXQsXG4gIEV2ZW50RW1pdHRlcixcbiAgVGVtcGxhdGVSZWYsXG4gIFZpZXdDaGlsZCxcbiAgT25DaGFuZ2VzXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTmd4TXVsdGlzZWxlY3RTZXJ2aWNlIH0gZnJvbSAnLi4vc2VydmljZXMvbXVsdGlzZWxlY3Quc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ21zLWdyb3VwZWQtb3B0aW9ucycsXG4gIHRlbXBsYXRlVXJsOiAnLi9ncm91cGVkLW9wdGlvbnMuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9ncm91cGVkLW9wdGlvbnMuY29tcG9uZW50LmNzcyddLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbn0pXG5leHBvcnQgY2xhc3MgR3JvdXBlZE9wdGlvbnNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIF9vcHRpb25zID0gW107XG4gIF9zZWxlY3RlZE9wdGlvbnMgPSBbXTtcbiAgZ3JvdXBlZE9wdGlvbnMgPSBbXTtcbiAgc3RhcnQ6IG51bWJlciA9IDA7XG4gIGVuZDogbnVtYmVyID0gNTtcbiAgZmlsdGVyZWRPcHRpb25zO1xuXG4gIEBJbnB1dCgpIGdyb3VwZWRQcm9wZXJ0eTogc3RyaW5nO1xuICBASW5wdXQoKSBkaXNhYmxlZCA9IGZhbHNlO1xuICBASW5wdXQoKSBtdWx0aXBsZSA9IGZhbHNlO1xuICBASW5wdXQoKSBzZXQgc2VsZWN0ZWRPcHRpb25zKHZhbHVlKSB7XG4gICAgdGhpcy5fc2VsZWN0ZWRPcHRpb25zID0gdmFsdWU7XG4gICAgdGhpcy5mb3JtR3JvdXBPcHRpb25zKHRoaXMuX29wdGlvbnMsIHRoaXMuX3NlbGVjdGVkT3B0aW9ucyk7XG4gIH1cbiAgQElucHV0KCkgb3B0aW9uc1RlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBASW5wdXQoKSBzZXQgb3B0aW9ucyh2YWx1ZSkge1xuICAgIHRoaXMuX29wdGlvbnMgPSB2YWx1ZTtcbiAgICB0aGlzLmZvcm1Hcm91cE9wdGlvbnModmFsdWUsIHRoaXMuX3NlbGVjdGVkT3B0aW9ucyk7XG4gIH1cbiAgZ2V0IG9wdGlvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ3JvdXBlZE9wdGlvbnM7XG4gIH1cblxuICBAT3V0cHV0KCkgc2VsZWN0R3JvdXAgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIHNlbGVjdE9wdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIEBWaWV3Q2hpbGQoJ2RlZmF1bHRPcHRpb25zVGVtcGxhdGUnLCB7IHN0YXRpYzogdHJ1ZSB9KSBkZWZhdWx0T3B0aW9uc1RlbXBsYXRlOiBUZW1wbGF0ZVJlZjxhbnk+O1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBtdWx0aXNlbGVjdFNlcnZpY2U6IE5neE11bHRpc2VsZWN0U2VydmljZSkge31cblxuICAvLyBUT0RPOiBSZWZhY3RvciBiZWxvdyBsb2dpY1xuICBmb3JtR3JvdXBPcHRpb25zKGNvbGxlY3Rpb24sIHNlbGVjdGVkT3B0aW9ucykge1xuICAgIGxldCBzZWxlY3RlZElkcyA9IHRoaXMubXVsdGlwbGUgPyBcbiAgICAgIChzZWxlY3RlZE9wdGlvbnMgfHwgW10pLm1hcChzID0+IHMuaWQpIDogXG4gICAgICAgIHNlbGVjdGVkT3B0aW9ucyA/IFtzZWxlY3RlZE9wdGlvbnMuaWRdXG4gICAgICAgIDpbXTtcbiAgICBjb25zdCB2YWx1ZXMgPSBjb2xsZWN0aW9uLm1hcCh2ID0+ICh7IFxuICAgICAgLi4udiwgXG4gICAgICB0aWNrZWQ6ICF2LmlzR3JvdXAgPyBzZWxlY3RlZElkcy5pbmRleE9mKHYuaWQpICE9PSAtMSA6IHYudGlja2VkXG4gICAgIH0pKTtcbiAgICB0aGlzLmdyb3VwZWRPcHRpb25zID0gdGhpcy5tdWx0aXNlbGVjdFNlcnZpY2UudmlydHVhbE9wdGlvbnNHcm91cGluZ0ZsYXR0ZW4odmFsdWVzLCB0aGlzLmdyb3VwZWRQcm9wZXJ0eSk7XG4gICAgdGhpcy51cGRhdGVSYW5nZSh7IHN0YXJ0OiB0aGlzLnN0YXJ0LCBlbmQ6IHRoaXMuZW5kIH0pO1xuICB9XG5cbiAgZ2V0T3B0aW9uU3R5bGUob3B0aW9uOiBhbnkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZ3JvdXA6IG9wdGlvbi5pc0dyb3VwLFxuICAgICAgbWFya2VkOiBvcHRpb24udGlja2VkLFxuICAgICAgZGlzYWJsZWQ6IHRoaXMuZGlzYWJsZWQgfHwgb3B0aW9uLmRpc2FibGVkXG4gICAgfTtcbiAgfVxuXG4gIHRyYWNrQnlGbihfLCBvcHRpb24pIHtcbiAgICByZXR1cm4gb3B0aW9uLmlkO1xuICB9XG5cbiAgdXBkYXRlUmFuZ2UoeyBzdGFydCwgZW5kIH0pIHtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5lbmQgPSBlbmQ7XG4gICAgdGhpcy5maWx0ZXJlZE9wdGlvbnMgPSBbLi4udGhpcy5vcHRpb25zXS5zbGljZShzdGFydCwgZW5kKTtcbiAgfVxuXG4gIHNlbGVjdChvcHRpb24pIHtcbiAgICBpZiAoIW9wdGlvbi5pc0dyb3VwKSB7XG4gICAgICB0aGlzLnNlbGVjdE9wdGlvbi5lbWl0KG9wdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdGlvbi50aWNrZWQgPSAhb3B0aW9uLnRpY2tlZDtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMubXVsdGlzZWxlY3RTZXJ2aWNlLmNvbGxlY3RBbGxEZXNjZW5kYW50cyh0aGlzLm9wdGlvbnMsIHRoaXMuZ3JvdXBlZFByb3BlcnR5LCBvcHRpb24ubmFtZSk7XG4gICAgICB0aGlzLnNlbGVjdEdyb3VwLmVtaXQoeyBcbiAgICAgICAgLi4ub3B0aW9uLFxuICAgICAgICB2YWx1ZXM6IHZhbHVlc1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gIH1cblxuICBuZ09uQ2hhbmdlcygpIHtcbiAgICBpZiAoIXRoaXMub3B0aW9uc1RlbXBsYXRlKSB7XG4gICAgICB0aGlzLm9wdGlvbnNUZW1wbGF0ZSA9IHRoaXMuZGVmYXVsdE9wdGlvbnNUZW1wbGF0ZTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==