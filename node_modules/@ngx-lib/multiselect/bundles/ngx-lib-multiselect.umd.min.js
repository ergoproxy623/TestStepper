!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("@ngx-lib/multiselect",["exports","@angular/core","@angular/forms","@angular/common"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-lib"]=t["ngx-lib"]||{},t["ngx-lib"].multiselect={}),t.ng.core,t.ng.forms,t.ng.common)}(this,(function(t,e,n,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var o,i,s=n.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=s.next()).done;)r.push(o.value)}catch(t){i={error:t}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return r}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}Object.create;var r=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],l=function(){function t(){}return t.prototype.pseudoClassExist=function(t,e){var n=t.matches||t.msMatchesSelector;try{return n.call(t,e)}catch(t){return!1}},t.prototype.closest=function(t,e){var n,o;for(r.some((function(t){return"function"==typeof document.body[t]&&(n=t,!0)}));t;){if((o=t.parentElement)&&o[n](e))return o;t=o}return!1},t.prototype.collectAllDescendants=function(t,e,n){var o=t.filter((function(t){return t[e]==n}));return o.concat(t.filter((function(t){return t.parent==n}))),o},t.prototype.allDescendantsAreTicked=function(t,e,n){return this.collectAllDescendants(t,e,n).every((function(t){return t.ticked}))},t.prototype.allDescendantsAreDisabled=function(t,e,n){return this.collectAllDescendants(t,e,n).every((function(t){return t.disabled}))},t.prototype.optionsGrouping=function(t,e){return this.findUnique(t.map((function(t){return t[e]}))).map((function(n){var o=t.filter((function(t){return t[e]===n}));return{name:n,values:o,ticked:o.every((function(t){return t.ticked})),disabled:o.every((function(t){return t.disabled}))}}))},t.prototype.findUnique=function(t){return s(Array.from(new Set(t)))},t.prototype.virtualOptionsGroupingFlatten=function(t,e){var n=this,o=this.findUnique(t.filter((function(t){return!t.parent})).map((function(t){return t[e]}))),i=this.findUnique(t.filter((function(t){return t.parent})).map((function(t){return{name:t.name,parent:t.parent}}))),r=[];return o.forEach((function(o){r.push({name:o,isGroup:!0,ticked:n.allDescendantsAreTicked(t,e,o),disabled:n.allDescendantsAreDisabled(t,e,o)});var l=t.filter((function(t){return t[e]===o&&!t.parent})).map((function(t){return Object.assign(Object.assign({},t),{depth:1})}));r=s(r).concat(l),i.filter((function(t){return t.parent===o})).forEach((function(n){r.push({name:n,parent:o,isGroup:!0});var i=t.filter((function(t){return t[e]===n})).map((function(t){return Object.assign(Object.assign({},t),{depth:2})}));r.concat(i)}))})),r},t.prototype.mirrorObject=function(t){var e={};for(var n in t)e[t[n]]=n;return e},t.prototype.mapDatasourceToFields=function(t,e,n){var o=Object.keys(e);return t.map((function(t){var i,s=n?((i={})[n]=t[n],i):{};return o.reduce((function(n,o){s[o]=t[e[o]]}),s),s}))},t}();l.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],l.ctorParameters=function(){return[]},l.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new l},token:l,providedIn:"root"});var p=function(){function t(){this.onSearchChange=new e.EventEmitter}return t.prototype.clearInputFilter=function(){this.filterName.setValue("")},t.prototype.ngOnInit=function(){var t=this;this.filterName=new n.FormControl(""),this.filterNameSubscription=this.filterName.valueChanges.subscribe((function(e){return t.onSearchChange.emit(e)}))},t.prototype.ngOnDestroy=function(){this.filterNameSubscription.unsubscribe()},t}();p.decorators=[{type:e.Component,args:[{selector:"ms-filter-options",template:'<div class="input-search">\n  <div class="field-infix">\n    <input\n      autofocus\n      placeholder="Search options here.."\n      type="text"\n      [formControl]="filterName"\n      ngDefaultControl\n      class="input-filter"\n    />\n  </div>\n  <div class="field-suffix">\n    <button type="button" [disabled]="!filterName.value" (click)="clearInputFilter()" class="clear-button">X</button>\n  </div>\n</div>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[".input-search{align-items:stretch;display:flex;flex-grow:1;height:30px;padding:2px}.mat-multiselect :host ::ng-deep .input-search{border-bottom:1px solid rgba(0,0,0,.12)}.mat-multiselect :host ::ng-deep .input-filter{border:none;flex-grow:1;font:inherit;outline:none}.mat-multiselect :host ::ng-deep .field-infix{display:flex;flex:1;padding:5px}.mat-multiselect :host ::ng-deep .field-suffix{margin:3px;white-space:nowrap}.mat-multiselect :host ::ng-deep .field-suffix button{border:none;border-radius:10px;font-size:inherit;height:20px;min-width:20px;padding:0;width:20px}.bs-multiselect :host ::ng-deep .clear-button{background-color:#f1f1f1;border:none;border-radius:2px;color:#666;cursor:pointer;font-size:inherit;max-width:20px;min-width:20px;padding:0}.bs-multiselect :host ::ng-deep .input-filter{border:1px solid #ccc;border-radius:2px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);box-sizing:border-box;color:#666;cursor:pointer;font-size:inherit;height:30px;height:100%;padding-left:7px;width:100%}.bs-multiselect :host ::ng-deep .field-infix{display:flex;flex-grow:1}.bs-multiselect :host ::ng-deep .field-suffix{display:flex}"]}]}],p.ctorParameters=function(){return[]},p.propDecorators={onSearchChange:[{type:e.Output}]};var a={provide:n.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return c})),multi:!0},c=function(){function t(t,n){var o=this;this.elementRef=t,this.multiselectService=n,this._theme="material",this._isOpen=!1,this.operationPendingQueue=[],this._selectedOptions=null,this._defaultPropertyMap={id:"id",name:"name",disabled:"disabled"},this._defaultPropertyMapLength=Object.keys(this._defaultPropertyMap).length,this.matMultiselect=!0,this.bsMultiselect=!1,this.disabled=!1,this.color="blue",this.showHelperElements=!0,this.showSearchFilter=!0,this.showMaxLabels=3,this.onOpen=new e.EventEmitter,this.onClose=new e.EventEmitter,this.onItemClick=new e.EventEmitter,this.onGroupItemClick=new e.EventEmitter,this.onSelectAll=new e.EventEmitter,this.onSelectNone=new e.EventEmitter,this.onReset=new e.EventEmitter,this.onClear=new e.EventEmitter,this.onSearchChange=new e.EventEmitter,this.onChange=function(t){},this.onTouched=function(){},this.filterOptionsList=function(t){var e=o.getOptionsCopy(),n=e;t&&(n=e.filter((function(e){return e.name&&-1!==e.name.toLowerCase().indexOf(t.toLowerCase())}))),o.setOptions(n),o.prepopulateOptions(o._selectedOptions)}}return Object.defineProperty(t.prototype,"optionsTemplate",{get:function(){return this._optionsTemplate},set:function(t){this._optionsTemplate=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this._theme},set:function(t){this._theme=t,this.matMultiselect="material"===t,this.bsMultiselect="bootstrap"===t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._isOpen},set:function(t){this._isOpen=t,t?(this.filterOptionsList(""),this.onTouched(),this.onOpen.emit()):this.onClose.emit()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propertyMap",{set:function(t){this._defaultPropertyMap=Object.assign(Object.assign({},this._defaultPropertyMap),t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"multiple",{get:function(){return this._multiple},set:function(t){this.viewToModel(t?[]:null),this._multiple=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{set:function(t){if(t){this._optionsCopy=this.multiselectService.mapDatasourceToFields(t,this._defaultPropertyMap,this.groupedProperty);var e=this.getOptionsCopy();this.setOptions(e),this.isOperationPending()&&this.finishPendingOperations()}},enumerable:!1,configurable:!0}),t.prototype.addOperation=function(t){this.operationPendingQueue.push(t)},t.prototype.popOperation=function(){return this.operationPendingQueue.pop()},t.prototype.finishPendingOperations=function(){var t=this.popOperation();this.prepopulateOptions(t)},t.prototype.isOperationPending=function(){return this.operationPendingQueue.length},Object.defineProperty(t.prototype,"initialValue",{get:function(){return this._initialValue},set:function(t){this._initialValue=t},enumerable:!1,configurable:!0}),t.prototype.writeValue=function(t){t&&(this.initialValue=t,this._options?this.prepopulateOptions(t):this.addOperation(t),this.formatPrepopulatedValues(t))},t.prototype.formatPrepopulatedValues=function(t){var e=t;if(Object.keys(this._defaultPropertyMap).length!=this._defaultPropertyMapLength){var n=this.multiselectService.mirrorObject(this._defaultPropertyMap);this.multiple?e.forEach((function(t){t.id=t[n.id],t.name=t[n.name]})):(t.id=t[n.id],t.name=t[n.name],e=t)}},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setOptions=function(t){this._options=t},t.prototype.getOptions=function(){return this._options?s(this._options):[]},t.prototype.getOptionsCopy=function(){return this._optionsCopy?s(this._optionsCopy):[]},t.prototype.isValueSelected=function(){return this._selectedOptions&&this._multiple?this._selectedOptions.length:this._selectedOptions},t.prototype.searchChange=function(t){this.filterOptionsList(t),this.onSearchChange.emit(t)},t.prototype.close=function(){this.isOpen=!1},t.prototype.removeItem=function(t,e){e.ticked=!1;var n=t.findIndex((function(t){return t.id===e.id}));t.splice(n,1)},t.prototype.toggleDropdown=function(){this.isOpen=!this.isOpen},t.prototype.prepopulateOptions=function(t){var e=[];e=this._multiple?(t||[]).map((function(t){return t.id})):t?[t.id]:[],this.setOptions(this.getOptions().map((function(t){return Object.assign(Object.assign({},t),{ticked:-1!==e.indexOf(t.id)})}))),this.viewToModel(t)},t.prototype.select=function(t){var e;if(t.ticked=!t.ticked,this._multiple){var n=(e=s(this._selectedOptions)).map((function(t){return t.id}));-1===n.indexOf(t.id)?e.push(t):this.removeItem(e,t),n=e.map((function(t){return t.id}))}else{var o=t&&t.id,i=this.getOptions().map((function(t){return Object.assign(Object.assign({},t),{ticked:t.id==o})}));e=i.find((function(t){return t.ticked})),this.setOptions(i),this.close()}this.viewToModel(e),this.onItemClick.emit(t)},t.prototype.selectAll=function(){var t=this.getOptions().map((function(t){return Object.assign(Object.assign({},t),{ticked:!0})}));this.setOptions(t),this.viewToModel(t),this.onSelectAll.emit()},t.prototype.selectNone=function(){var t=this.getOptions().map((function(t){return Object.assign(Object.assign({},t),{ticked:!1})}));this.setOptions(t),this.viewToModel([]),this.onSelectNone.emit()},t.prototype.borderBottom=function(){return this._isOpen?{borderBottom:"1px solid "+(this.matMultiselect?this.color:"transperant")}:{}},t.prototype.selectGroup=function(t){var e=t.ticked,n=t.values,o=this.getOptions(),i=s(this._selectedOptions),r=i.map((function(t){return t.id})),l=n.map((function(t){return t.id}));i=e?i.concat(n):i.filter((function(t){return-1===l.indexOf(t.id)})),r=this.multiselectService.findUnique(i.map((function(t){return t.id}))),i=o.filter((function(t){return-1!==r.indexOf(t.id)})),this.viewToModel(i),this.onGroupItemClick.emit(t)},t.prototype.reset=function(){this.viewToModel(this.initialValue),this.prepopulateOptions(this.initialValue),this.onReset.emit()},t.prototype.viewToModel=function(t){this._selectedOptions!==t&&(this._selectedOptions=t,this.onChange(t))},t.prototype.clear=function(t){var e=this.getOptions().map((function(t){return Object.assign(Object.assign({},t),{ticked:!1})}));this.setOptions(e),this.viewToModel(null),this.onClear.emit(),this.close(),t.stopPropagation()},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.ngOnInit=function(){void 0===this._multiple&&(this.multiple=!0)},t.prototype.clickOutSide=function(t){this.isOpen&&this.elementRef.nativeElement!==t&&!this.multiselectService.closest(t,"ngx-multiselect")&&this.close()},t}();c.decorators=[{type:e.Component,args:[{selector:"ngx-multiselect",template:'<div class="multiselect-wrapper">\n  <button class="dropdown-button" (click)="toggleDropdown()" [ngClass]="{ open: isOpen }">\n    <div class="selection" [ngStyle]="borderBottom()">\n      \x3c!-- TODO: None selected template should be ng-template --\x3e\n      <span class="none-selected" *ngIf="!isValueSelected()">None selected</span>\n      <span class="selected" *ngIf="isValueSelected()">\n        <span class="text">{{_selectedOptions | displaySelectedValue: showMaxLabels}}</span>\n      </span>\n      <div class="symbols">\n        <span class="close" (click)="clear($event)" *ngIf="isValueSelected() && !multiple">×</span>\n        <span class="caret"></span>\n      </div>\n    </div>\n  </button>\n  <div class="listing-wrapper" *ngIf="isOpen">\n    <ms-helper-elements\n      *ngIf="showHelperElements"\n      [multiple]="multiple"\n      [disabled]="disabled"\n      (onClear)="onClear.emit()"\n      (resetClicked)="reset()"\n      (onSearchChange)="onSearchChange.emit($event)"\n      (selectNoneClicked)="selectNone()"\n      (selectAllClicked)="selectAll()"\n      (selectNoneClicked)="selectNone()"\n    >\n    </ms-helper-elements>\n    <ms-filter-options\n      *ngIf="showSearchFilter"\n      #filterOptions\n      (onSearchChange)="searchChange($event)"\n    ></ms-filter-options>\n    <ng-container *ngIf="!groupedProperty; else groupedTemplate">\n      <ms-options\n        [optionsTemplate]="optionsTemplate"\n        [options]="_options"\n        [disabled]="disabled"\n        (selectOption)="select($event)"\n      ></ms-options>\n    </ng-container>\n  </div>\n</div>\n<ng-template #groupedTemplate>\n  <ms-grouped-options\n    [multiple]="multiple"\n    [optionsTemplate]="optionsTemplate"\n    [selectedOptions]="_selectedOptions"\n    [options]="_options"\n    [disabled]="disabled"\n    [groupedProperty]="groupedProperty"\n    (selectOption)="select($event)"\n    (selectGroup)="selectGroup($event)"\n  >\n  </ms-grouped-options>\n</ng-template>\n',providers:[a],changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[':host{display:inline-block;outline:none}.multiselect-wrapper{display:flex;flex-grow:1;width:240px}.selection{flex-grow:1;justify-content:space-between}.selection,.symbols{align-items:center;display:flex}.symbols{justify-content:flex-end}.symbols .caret{border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid}.dropdown-button{-moz-user-select:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none;background-color:#fff;border:none;cursor:pointer;display:flex;flex-grow:1;font-size:inherit;min-height:39px;padding:5px;user-select:none;white-space:normal}.listing-wrapper{background-color:#fff;border:1px solid rgba(0,0,0,.15);border-radius:4px;box-shadow:0 6px 12px rgba(0,0,0,.175);position:absolute;width:inherit;z-index:999}::ng-deep .options-container{height:200px;overflow-y:scroll}:host.mat-multiselect ::ng-deep .option{-webkit-tap-highlight-color:transparent;align-items:center;border-left:.5px solid #eee;display:flex;flex-flow:row;height:40px;max-height:40px;outline:0;overflow:hidden;padding:0 6px;text-overflow:ellipsis;white-space:nowrap}:host.mat-multiselect ::ng-deep .option.marked,:host.mat-multiselect ::ng-deep .option.marked:hover,:host.mat-multiselect ::ng-deep .option:hover:not(.message){background-image:linear-gradient(#e9e9e9,#f1f1f1);color:#555;cursor:pointer;justify-content:space-between}:host.mat-multiselect ::ng-deep .marked:after{content:"✓"}:host.mat-multiselect ::ng-deep .option.disabled,:host.mat-multiselect ::ng-deep .option.disabled:hover:not(.message),:host.mat-multiselect ::ng-deep .option.disabled label input:hover~span{color:#c4c4c4!important;cursor:not-allowed!important;pointer-events:none}:host.mat-multiselect ::ng-deep .none-selected{-webkit-text-fill-color:#7a7a7a;color:#7a7a7a;transition:none}:host.mat-multiselect ::ng-deep .dropdown-button{color:#000}:host.mat-multiselect ::ng-deep .selection{border-bottom:1px solid #000;color:#000;padding-bottom:10px}:host.mat-multiselect ::ng-deep .open .selection{border-bottom:1px solid #00f}:host.bs-multiselect ::ng-deep .marked{background-color:green}:host.bs-multiselect ::ng-deep .dropdown-button{background-image:linear-gradient(#fff,#f7f7f7);border:1px solid #c6c6c6;border-radius:4px;color:#555}:host.bs-multiselect ::ng-deep .option{align-items:center;background-color:transparent;border-radius:4px;box-shadow:inset 0 1px 1px rgba(0,0,0,.075);color:#555;display:flex;font-size:inherit;height:40px;max-height:40px;padding:0 6px}:host.bs-multiselect ::ng-deep .option:hover{background-image:linear-gradient(#c1c1c1,#999)!important;color:#fff!important;cursor:pointer}:host.bs-multiselect ::ng-deep .option.marked{background-image:linear-gradient(#e9e9e9,#f1f1f1);color:#555;cursor:pointer;display:flex;justify-content:space-between}:host.bs-multiselect ::ng-deep .marked:after{content:"✓";width:15px}:host.bs-multiselect ::ng-deep .option.disabled,:host.bs-multiselect ::ng-deep .option.disabled:hover,:host.bs-multiselect ::ng-deep .option.disabled label input:hover~span{color:#c4c4c4!important;cursor:not-allowed!important;pointer-events:none}']}]}],c.ctorParameters=function(){return[{type:e.ElementRef},{type:l}]},c.propDecorators={matMultiselect:[{type:e.HostBinding,args:["class.mat-multiselect"]}],bsMultiselect:[{type:e.HostBinding,args:["class.bs-multiselect"]}],disabled:[{type:e.Input}],color:[{type:e.Input}],groupedProperty:[{type:e.Input}],showHelperElements:[{type:e.Input}],showSearchFilter:[{type:e.Input}],showMaxLabels:[{type:e.Input}],_optionsTemplate:[{type:e.ContentChild,args:[e.TemplateRef]}],optionsTemplate:[{type:e.Input}],theme:[{type:e.Input}],isOpen:[{type:e.Input}],propertyMap:[{type:e.Input}],multiple:[{type:e.Input}],options:[{type:e.Input}],onOpen:[{type:e.Output}],onClose:[{type:e.Output}],onItemClick:[{type:e.Output}],onGroupItemClick:[{type:e.Output}],onSelectAll:[{type:e.Output}],onSelectNone:[{type:e.Output}],onReset:[{type:e.Output}],onClear:[{type:e.Output}],onSearchChange:[{type:e.Output}],filterOptions:[{type:e.ViewChild,args:["filterOptions",{read:p}]}],clickOutSide:[{type:e.HostListener,args:["document:click",["$event.target"]]}]};var u=function(){function t(){this.defaultMaxLabelCount=3}return t.prototype.transform=function(t,e){if(void 0===e&&(e=this.defaultMaxLabelCount),t instanceof Array){var n=s(t),o=n.length,i=n.length>e;return i&&(n.length=e),n.map((function(t){return t.name})).join(", ")+(i?" ... ("+o+")":"")}return t&&t.name},t}();u.decorators=[{type:e.Pipe,args:[{name:"displaySelectedValue",pure:!1}]}];var d=function(){function t(){this.multiple=!1,this.disabled=!1,this.selectAllClicked=new e.EventEmitter,this.selectNoneClicked=new e.EventEmitter,this.resetClicked=new e.EventEmitter}return t.prototype.selectAll=function(){this.selectAllClicked.emit()},t.prototype.selectNone=function(){this.selectNoneClicked.emit()},t.prototype.reset=function(){this.resetClicked.emit()},t}();d.decorators=[{type:e.Component,args:[{selector:"ms-helper-elements",template:'<div class="helper-buttons">\n  <fieldset [disabled]="disabled">\n    <ng-container *ngIf="multiple">\n      <button class="helper-button" (click)="selectAll()">✓ Select All</button>\n      <button class="helper-button" (click)="selectNone()">× Select None</button>\n    </ng-container>\n    <button class="helper-button" (click)="reset()">↶ Reset</button>\n  </fieldset>\n</div>',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[".helper-button{-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;border:1px solid rgba(0,0,0,.12);border-radius:.25rem;font-size:.75rem;font-weight:400;height:30px;max-height:30px;user-select:none;white-space:nowrap}fieldset{border:none;padding:0}.helper-buttons{border-bottom:1px solid #ddd;padding:2px}.mat-multiselect :host .helper-button{background-color:transparent;color:#444}.mat-multiselect :host .helper-button:not(:last-child){margin:0 2px}.bs-multiselect :host .helper-button{-webkit-tap-highlight-color:transparent;box-sizing:border-box;cursor:pointer;outline:0;padding:.25em}.bs-multiselect .helper-button:not(:last-child){margin-right:4px}"]}]}],d.ctorParameters=function(){return[]},d.propDecorators={multiple:[{type:e.Input}],disabled:[{type:e.Input}],selectAllClicked:[{type:e.Output}],selectNoneClicked:[{type:e.Output}],resetClicked:[{type:e.Output}]};var h=function(){function t(){this._options=[],this.disabled=!1,this.selectOption=new e.EventEmitter,this.start=0,this.end=5}return Object.defineProperty(t.prototype,"options",{set:function(t){this._options=t},enumerable:!1,configurable:!0}),t.prototype.get=function(){return this._options},t.prototype.getOptionStyle=function(t){return{marked:t.ticked,disabled:this.disabled||t.disabled}},t.prototype.select=function(t){this.selectOption.emit(t)},t.prototype.updateRange=function(t){var e=t.start,n=t.end;this.filteredOptions=s(this._options).slice(e,n)},t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){var e=t.options;this.optionsTemplate||(this.optionsTemplate=this.defaultOptionsTemplate),e.currentValue!==e.previousValue&&this.updateRange({start:this.start,end:this.end})},t}();h.decorators=[{type:e.Component,args:[{selector:"ms-options",template:'<div class="options-container" msVirtualScroll [totalCount]="_options?.length" (rangeChanged)="updateRange($event)">\n  <div #top class="top"></div>\n  <ng-container *ngIf="filteredOptions.length; else noOptions">\n    <div\n      class="option"\n      [ngClass]="getOptionStyle(option)"\n      *ngFor="let option of filteredOptions"\n      (click)="select(option)"\n    >\n      <ng-container\n        *ngTemplateOutlet="\n          optionsTemplate;\n          context: {\n            option: option\n          }\n        "\n      ></ng-container>\n    </div>\n  </ng-container>\n  <div #bottom class="bottom"></div>\n</div>\n<ng-template #defaultOptionsTemplate let-option="option">\n  {{ option.name }}\n</ng-template>\n<ng-template #noOptions let-option="option">\n  <div class="option message">\n    No options available.\n  </div>\n</ng-template>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[""]}]}],h.ctorParameters=function(){return[]},h.propDecorators={disabled:[{type:e.Input}],options:[{type:e.Input}],optionsTemplate:[{type:e.Input}],selectOption:[{type:e.Output}],defaultOptionsTemplate:[{type:e.ViewChild,args:["defaultOptionsTemplate",{static:!0}]}]};var m=function(){function t(t){this.multiselectService=t,this._options=[],this._selectedOptions=[],this.groupedOptions=[],this.start=0,this.end=5,this.disabled=!1,this.multiple=!1,this.selectGroup=new e.EventEmitter,this.selectOption=new e.EventEmitter}return Object.defineProperty(t.prototype,"selectedOptions",{set:function(t){this._selectedOptions=t,this.formGroupOptions(this._options,this._selectedOptions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.groupedOptions},set:function(t){this._options=t,this.formGroupOptions(t,this._selectedOptions)},enumerable:!1,configurable:!0}),t.prototype.formGroupOptions=function(t,e){var n=this.multiple?(e||[]).map((function(t){return t.id})):e?[e.id]:[],o=t.map((function(t){return Object.assign(Object.assign({},t),{ticked:t.isGroup?t.ticked:-1!==n.indexOf(t.id)})}));this.groupedOptions=this.multiselectService.virtualOptionsGroupingFlatten(o,this.groupedProperty),this.updateRange({start:this.start,end:this.end})},t.prototype.getOptionStyle=function(t){return{group:t.isGroup,marked:t.ticked,disabled:this.disabled||t.disabled}},t.prototype.trackByFn=function(t,e){return e.id},t.prototype.updateRange=function(t){var e=t.start,n=t.end;this.start=e,this.end=n,this.filteredOptions=s(this.options).slice(e,n)},t.prototype.select=function(t){if(t.isGroup){t.ticked=!t.ticked;var e=this.multiselectService.collectAllDescendants(this.options,this.groupedProperty,t.name);this.selectGroup.emit(Object.assign(Object.assign({},t),{values:e}))}else this.selectOption.emit(t)},t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(){this.optionsTemplate||(this.optionsTemplate=this.defaultOptionsTemplate)},t}();m.decorators=[{type:e.Component,args:[{selector:"ms-grouped-options",template:'<div class="options-container" msVirtualScroll [totalCount]="options.length" (rangeChanged)="updateRange($event)">\n  <div #top class="top"></div>\n  <ng-container *ngIf="filteredOptions.length; else noOptions">\n    <div\n      class="option"\n      [ngStyle]="{ marginLeft: option.depth * 15 + \'px\' }"\n      [ngClass]="getOptionStyle(option)"\n      *ngFor="let option of filteredOptions; trackBy: trackByFn"\n      (click)="select(option)"\n    >\n      <ng-container\n        *ngTemplateOutlet="\n          optionsTemplate;\n          context: {\n            option: option\n          }\n        "\n      ></ng-container>\n    </div>\n  </ng-container>\n  <div #bottom class="bottom"></div>\n</div>\n<ng-template #defaultOptionsTemplate let-option="option">\n  {{ option?.name }}\n</ng-template>\n<ng-template #noOptions let-option="option">\n  <div class="option message">\n    No options available.\n  </div>\n</ng-template>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[""]}]}],m.ctorParameters=function(){return[{type:l}]},m.propDecorators={groupedProperty:[{type:e.Input}],disabled:[{type:e.Input}],multiple:[{type:e.Input}],selectedOptions:[{type:e.Input}],optionsTemplate:[{type:e.Input}],options:[{type:e.Input}],selectGroup:[{type:e.Output}],selectOption:[{type:e.Output}],defaultOptionsTemplate:[{type:e.ViewChild,args:["defaultOptionsTemplate",{static:!0}]}]};var f=function(){function t(t,n){this.el=t,this.renderer=n,this.scrollOffset=0,this.itemHeight=40,this.rangeChanged=new e.EventEmitter,this.lastScrollFireTime=0}return Object.defineProperty(t.prototype,"totalCount",{set:function(t){this._totalCount=t,t?this.initialSetup():this.reset()},enumerable:!1,configurable:!0}),t.prototype.get=function(){return this._totalCount},t.prototype.reset=function(){this.top&&this.bottom&&(this.renderer.setStyle(this.top,"height",0),this.renderer.setStyle(this.bottom,"height",0),this.renderer.setProperty(this.el.nativeElement,"scrollTop",0))},t.prototype.throttleScroll=function(t){var e=t.scrollTop,n=t.clientHeight,o=this.itemHeight*this._totalCount+this.scrollOffset,i=e,s=(n-this.scrollOffset)/this.itemHeight,r=i%this.itemHeight,l=i-r,p=i/this.itemHeight,a=Math.floor(p),c=r?s+1:s,u=a+c,d=u>=this._totalCount?this._totalCount:u,h=o-(l+c*this.itemHeight);this.renderer.setStyle(this.top,"height",l+"px"),this.renderer.setStyle(this.bottom,"height",h+"px"),this.rangeChanged.emit({start:a,end:d})},t.prototype.onscroll=function(t){var e=this,n=t.target,o=(new Date).getTime();this.scrollTimer||(o-this.lastScrollFireTime>50&&(this.lastScrollFireTime=o),this.scrollTimer=setTimeout((function(){e.scrollTimer=null,e.lastScrollFireTime=(new Date).getTime(),e.throttleScroll(n)}),50))},t.prototype.initialSetup=function(){var t=this.el.nativeElement,e=t.scrollTop,n=t.clientHeight;this.top=this.renderer.selectRootElement(".top"),this.bottom=this.renderer.selectRootElement(".bottom"),this.renderer.setStyle(this.top,"height",e+"px"),this.renderer.setStyle(this.bottom,"height",this.itemHeight*this._totalCount+this.scrollOffset-n+"px"),this.renderer.setProperty(this.el.nativeElement,"scrollTop",0)},t}();f.decorators=[{type:e.Directive,args:[{selector:"[msVirtualScroll]"}]}],f.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2}]},f.propDecorators={itemHeight:[{type:e.Input}],totalCount:[{type:e.Input}],rangeChanged:[{type:e.Output}],onscroll:[{type:e.HostListener,args:["scroll",["$event"]]}]};var g=function(){};g.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule,n.FormsModule,n.ReactiveFormsModule],declarations:[c,u,d,p,h,m,f],exports:[c,u]}]}],t.DEFAULT_VALUE_ACCESSOR=a,t.DisplaySelectedValuePipe=u,t.FilterOptionsComponent=p,t.GroupedOptionsComponent=m,t.HelperElementsComponent=d,t.NgxMultiselectComponent=c,t.NgxMultiselectModule=g,t.NgxMultiselectService=l,t.OptionsComponent=h,t.ɵa=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-lib-multiselect.umd.min.js.map