{"version":3,"file":"ngx-lib-multiselect.js","sources":["../../../projects/multiselect/src/lib/services/multiselect.service.ts","../../../projects/multiselect/src/lib/filter-options/filter-options.component.ts","../../../projects/multiselect/src/lib/multiselect.component.ts","../../../projects/multiselect/src/lib/pipes/display-selected-value.pipe.ts","../../../projects/multiselect/src/lib/helper-elements/helper-elements.component.ts","../../../projects/multiselect/src/lib/options/options.component.ts","../../../projects/multiselect/src/lib/grouped-options/grouped-options.component.ts","../../../projects/multiselect/src/lib/directives/virtual-scroll.directive.ts","../../../projects/multiselect/src/lib/multiselect.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\nconst matchSelectors = [\n  'matches',\n  'webkitMatchesSelector',\n  'mozMatchesSelector',\n  'msMatchesSelector',\n  'oMatchesSelector'\n];\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxMultiselectService {\n  constructor() {}\n\n  pseudoClassExist(node, selector) {\n    const nativeMatches = node.matches || node.msMatchesSelector;\n    try {\n      return nativeMatches.call(node, selector);\n    } catch (error) {\n      return false;\n    }\n  }\n\n  closest(el, selector): boolean {\n    let matchesFn;\n    // find vendor prefix\n    matchSelectors.some(function(fn) {\n      if (typeof document.body[fn] === 'function') {\n        matchesFn = fn;\n        return true;\n      }\n      return false;\n    });\n\n    let parent;\n\n    // traverse parents\n    while (el) {\n      parent = el.parentElement;\n      if (parent && parent[matchesFn](selector)) {\n        return parent;\n      }\n      el = parent;\n    }\n\n    return false;\n  }\n\n  // TODO: make this logic to work to find all descendant groups\n  collectAllDescendants(collection, groupProperty, groupName) {\n    const allDescendants = collection.filter(item => item[groupProperty] == groupName);\n    allDescendants.concat(collection.filter(item => item.parent == groupName));\n    return allDescendants;\n  }\n\n  private allDescendantsAreTicked(collection, groupProperty, groupName) {\n    const allDescendants = this.collectAllDescendants(collection, groupProperty, groupName);\n    const allAreTicked = allDescendants.every(d => d.ticked);\n    return allAreTicked;\n  }\n  private allDescendantsAreDisabled(collection, groupProperty, groupName) {\n    const allDescendants = this.collectAllDescendants(collection, groupProperty, groupName);\n    const allAreDisabled = allDescendants.every(d => d.disabled);\n    return allAreDisabled;\n  }\n\n  optionsGrouping(options, groupByProperty): any[] {\n    const getAllUniqueGroupByPropertyValue = this.findUnique(options.map(item => item[groupByProperty]));\n    const result = getAllUniqueGroupByPropertyValue.map(group => {\n      const groupedValues = options.filter(o => o[groupByProperty] === group);\n      return {\n        name: group,\n        values: groupedValues,\n        ticked: groupedValues.every(o => o.ticked),\n        disabled: groupedValues.every(o => o.disabled)\n      };\n    });\n    return result;\n  }\n\n  findUnique(expression) {\n    return [...Array.from(new Set(expression))];\n  }\n\n  virtualOptionsGroupingFlatten(options, groupByProperty): any[] {\n    const allParentGroupedValues = this.findUnique(options.filter(o => !o.parent).map(item => item[groupByProperty]));\n    const subGroupedValues = this.findUnique(\n      options.filter(o => o.parent).map(({ name, parent }) => ({ name, parent }))\n    );\n    let result = [];\n    allParentGroupedValues.forEach(group => {\n      result.push({\n        name: group,\n        isGroup: true,\n        ticked: this.allDescendantsAreTicked(options, groupByProperty, group),\n        disabled: this.allDescendantsAreDisabled(options, groupByProperty, group)\n      });\n      const groupedValues = options\n        .filter(o => o[groupByProperty] === group && !o.parent)\n        .map(v => ({ ...v, depth: 1 }));\n      result = [...result].concat(groupedValues);\n      const childGroupedValues = subGroupedValues.filter((s: any) => s.parent === group);\n      childGroupedValues.forEach(c => {\n        result.push({ name: c, parent: group, isGroup: true });\n        const values = options.filter(o => o[groupByProperty] === c).map(v => ({ ...v, depth: 2 }));\n        result.concat(values);\n      });\n    });\n    return result;\n  }\n\n  mirrorObject(json) {\n    const ret = {};\n    for (var key in json) {\n      ret[json[key]] = key;\n    }\n    return ret;\n  }\n\n  mapDatasourceToFields(collection: any[], propertyMap, groupedProperty?) {\n    let keys = Object.keys(propertyMap);\n    return collection.map((item: any) => {\n      let obj = groupedProperty ? { [groupedProperty]: item[groupedProperty] } : {};\n      keys.reduce((a: any, b: string) => {\n        obj[b] = item[propertyMap[b]];\n      }, obj);\n      return obj;\n    });\n  }\n}\n","import { Component, OnInit, OnDestroy, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { Subscription } from 'rxjs';\n\n@Component({\n  selector: 'ms-filter-options',\n  templateUrl: './filter-options.component.html',\n  styleUrls: ['./filter-options.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FilterOptionsComponent implements OnInit, OnDestroy {\n  filterName: FormControl;\n  filterNameSubscription: Subscription;\n\n  @Output() onSearchChange = new EventEmitter<string>();\n\n  constructor() {}\n\n  clearInputFilter() {\n    this.filterName.setValue('');\n  }\n\n  ngOnInit() {\n    this.filterName = new FormControl('');\n    this.filterNameSubscription = this.filterName.valueChanges.subscribe(\n      val => this.onSearchChange.emit(val)\n    );\n  }\n\n  ngOnDestroy() {\n    this.filterNameSubscription.unsubscribe();\n  }\n}\n","import {\n  Component,\n  Input,\n  ChangeDetectionStrategy,\n  ElementRef,\n  ContentChild,\n  TemplateRef,\n  Output,\n  EventEmitter,\n  ViewChild,\n  HostBinding,\n  HostListener\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nimport { NgxMultiselectService } from './services/multiselect.service';\nimport { forwardRef } from '@angular/core';\nimport { FilterOptionsComponent } from './filter-options/filter-options.component';\n\nexport const DEFAULT_VALUE_ACCESSOR: any = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => NgxMultiselectComponent),\n  multi: true\n};\n\n@Component({\n  selector: 'ngx-multiselect',\n  templateUrl: './multiselect.component.html',\n  styleUrls: ['./multiselect.component.css'],\n  providers: [DEFAULT_VALUE_ACCESSOR],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class NgxMultiselectComponent implements ControlValueAccessor {\n  constructor(\n    private elementRef: ElementRef,\n    private multiselectService: NgxMultiselectService\n  ) { }\n\n  // private variables\n  private _multiple;\n  private _theme: string = 'material';\n  private _optionsCopy;\n  private _isOpen: boolean = false;\n  private operationPendingQueue: any[] = [];\n\n  // public variables\n  _selectedOptions: any | any[] = null;\n  _defaultPropertyMap = {\n    id: 'id',\n    name: 'name',\n    disabled: 'disabled'\n  };\n  _defaultPropertyMapLength = Object.keys(this._defaultPropertyMap).length;\n  _options;\n\n  @HostBinding('class.mat-multiselect') matMultiselect: boolean = true;\n  @HostBinding('class.bs-multiselect') bsMultiselect: boolean = false;\n\n  // Input bindings\n  @Input() disabled: boolean = false;\n  @Input() color: string = 'blue';\n  @Input() groupedProperty: string;\n  @Input() showHelperElements: boolean = true;\n  @Input() showSearchFilter: boolean = true;\n  @Input() showMaxLabels: number = 3;\n  @ContentChild(TemplateRef) _optionsTemplate: TemplateRef<any>;\n  @Input()\n  get optionsTemplate() {\n    return this._optionsTemplate;\n  }\n  set optionsTemplate(template) {\n    this._optionsTemplate = template;\n  }\n  @Input()\n  public get theme(): string {\n    return this._theme;\n  }\n  public set theme(val: string) {\n    this._theme = val;\n    this.matMultiselect = val === 'material';\n    this.bsMultiselect = val === 'bootstrap';\n  }\n\n  // Input binding with getter / setter\n  @Input() set isOpen(value) {\n    this._isOpen = value;\n    // onOpen and onClose event will be fired by isOpen setter\n    if (value) {\n      // list populate, based on empty value\n      this.filterOptionsList('');\n      this.onTouched();\n      this.onOpen.emit();\n    } else {\n      this.onClose.emit();\n    }\n  }\n  get isOpen() {\n    return this._isOpen;\n  }\n  @Input() set propertyMap(val) {\n    this._defaultPropertyMap = { ...this._defaultPropertyMap, ...val };\n  }\n  @Input()\n  get multiple() {\n    return this._multiple;\n  }\n  set multiple(value: boolean) {\n    this.viewToModel(value ? []: null);\n    this._multiple = value;\n  }\n\n  @Input()\n  set options(collection) {\n    if (!collection) return;\n    this._optionsCopy = this.multiselectService.mapDatasourceToFields(\n      collection,\n      this._defaultPropertyMap,\n      this.groupedProperty\n    );\n    const options = this.getOptionsCopy();\n    this.setOptions(options);\n    // Sometimes binding can happens lazily, \n    // so `finishPendingOperations` helps to execute such operations\n    if (this.isOperationPending()) this.finishPendingOperations();\n  }\n\n  // Output bindings\n  @Output() onOpen: EventEmitter<any> = new EventEmitter<void>();\n  @Output() onClose: EventEmitter<any> = new EventEmitter<void>();\n  @Output() onItemClick: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onGroupItemClick: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onSelectAll: EventEmitter<any> = new EventEmitter<void>();\n  @Output() onSelectNone: EventEmitter<any> = new EventEmitter<void>();\n  @Output() onReset: EventEmitter<any> = new EventEmitter<void>();\n  @Output() onClear: EventEmitter<any> = new EventEmitter<void>();\n  @Output() onSearchChange: EventEmitter<any> = new EventEmitter<string>();\n\n  @ViewChild('filterOptions', { read: FilterOptionsComponent }) filterOptions;\n\n  // Adding pending operation in queue\n  addOperation(item) {\n    this.operationPendingQueue.push(item);\n  }\n\n  // Poping pending operation from queue sequentially\n  popOperation() {\n    return this.operationPendingQueue.pop();\n  }\n\n  /* \n    In future this code is going to resides inside different Service,\n    This pendingOperation feature is fine grained in future, \n    and can be used for multiple purpose like model update, collection update, etc.\n  */\n  // Extracting and finishing all pending operation\n  finishPendingOperations() {\n    const operation = this.popOperation();\n    this.prepopulateOptions(operation);\n  }\n\n  // Check pending operation queue status\n  isOperationPending() {\n    return this.operationPendingQueue.length;\n  }\n\n  private _initialValue: any;\n  set initialValue(value: any) {\n    this._initialValue = value;\n  }\n  get initialValue() {\n    return this._initialValue;\n  }\n\n  onChange = (_: any) => {};\n  onTouched = () => {};\n\n  writeValue(value) {\n    // Set selected value for initial load of value\n    if (value) {\n      this.initialValue = value;\n      this._options ? this.prepopulateOptions(value) : this.addOperation(value);\n      this.formatPrepopulatedValues(value);\n    }\n  }\n  private formatPrepopulatedValues(value): any {\n    let options = value;\n    // TODO: can we improve below logic?\n    if (Object.keys(this._defaultPropertyMap).length == this._defaultPropertyMapLength) return;\n    const swappedPropertyMap: any = this.multiselectService.mirrorObject(this._defaultPropertyMap);\n    if (this.multiple) {\n      options.forEach(o => {\n        o.id = o[swappedPropertyMap.id];\n        o.name = o[swappedPropertyMap.name];\n      });\n    } else {\n      value.id = value[swappedPropertyMap.id];\n      value.name = value[swappedPropertyMap.name];\n      options = value;\n    }\n  }\n\n  registerOnChange(fn: (value: any) => any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => any): void {\n    this.onTouched = fn;\n  }\n\n  // All update to options should happen from below method.\n  setOptions(options) {\n    this._options = options;\n  }\n\n  getOptions() {\n    return this._options ? [...this._options] : [];\n  }\n\n  getOptionsCopy() {\n    return this._optionsCopy ? [...this._optionsCopy] : [];\n  }\n\n  filterOptionsList = (val: string) => {\n    const optionsCopy = this.getOptionsCopy();\n    let result = optionsCopy;\n    if (val) {\n      result = optionsCopy.filter(i => i.name && i.name.toLowerCase().indexOf(val.toLowerCase()) !== -1);\n    }\n    this.setOptions(result);\n    this.prepopulateOptions(this._selectedOptions);\n  };\n\n  isValueSelected() {\n    return this._selectedOptions && this._multiple ? \n      this._selectedOptions.length :\n      this._selectedOptions;\n  }\n\n  searchChange(val: string) {\n    this.filterOptionsList(val);\n    this.onSearchChange.emit(val);\n  }\n\n  close() {\n    this.isOpen = false;\n  }\n\n  removeItem(collection, item) {\n    item.ticked = false;\n    const index = collection.findIndex(o => o.id === item.id);\n    collection.splice(index, 1);\n  }\n\n  toggleDropdown() {\n    this.isOpen = !this.isOpen;\n  }\n\n  prepopulateOptions(selected: any) {\n    let selectedIds = [];\n    selectedIds = this._multiple ? \n      (selected || []).map(i => i.id):\n      selected ? [selected.id]: [];\n    this.setOptions(\n      this.getOptions()\n        .map(o => ({ \n            ...o, \n            ticked: selectedIds.indexOf(o.id) !== -1 \n          })\n        )\n      );\n    // TODO: do we really need this reassignment?\n    this.viewToModel(selected);\n  }\n\n  select(option) {\n    let selectedOptions;\n    option.ticked = !option.ticked;\n    // TODO: Refactor below logic\n    if (this._multiple) {\n      selectedOptions = [...this._selectedOptions];\n      let selectedIds = selectedOptions.map(i => i.id);\n      if (selectedIds.indexOf(option.id) === -1) {\n        // if selected item not exist in collection, push it\n        selectedOptions.push(option);\n      } else {\n        // if selected item exist in collection, post it\n        this.removeItem(selectedOptions, option);\n      }\n      selectedIds = selectedOptions.map(i => i.id);\n    } else {\n      // TODO: find optimized way to do below\n      let val = option && option.id;\n      let changedOptions = this.getOptions()\n        .map(\n          o => ({ \n            ...o,\n            ticked: o.id == val \n          })\n        );\n      selectedOptions = changedOptions.find(i => i.ticked);\n      this.setOptions(changedOptions);\n      this.close();\n    }\n    this.viewToModel(selectedOptions);\n    this.onItemClick.emit(option);\n  }\n\n  selectAll() {\n    let allSelectedOptions = this.getOptions()\n      .map(\n        o => ({\n          ...o,\n          ticked: true\n        })\n      );\n    this.setOptions(allSelectedOptions);\n    this.viewToModel(allSelectedOptions);\n    this.onSelectAll.emit();\n  }\n\n  selectNone() {\n    const options = this.getOptions().map(o => ({\n      ...o,\n      ticked: false\n    }))\n    this.setOptions(options);\n    this.viewToModel([]);\n    this.onSelectNone.emit();\n  }\n\n  borderBottom() {\n    return this._isOpen ? { borderBottom: `1px solid ${this.matMultiselect ? this.color : 'transperant'}` } : {};\n  }\n\n  //TODO: Optimized below logic, it can be done in lesser steps\n  selectGroup(group: any) {\n    const { ticked, values } = group;\n    const options = this.getOptions();\n    let selectedValues = [...this._selectedOptions];\n    let selectedIds = selectedValues.map(s => s.id);\n    const allGroupOptionIds = values.map(v => v.id);\n    // Get all ticked options\n    // concat with selected options\n    selectedValues = ticked\n      ? selectedValues.concat(values)\n      : selectedValues.filter(o => allGroupOptionIds.indexOf(o.id) === -1);\n    // Find unique out of them\n    selectedIds = this.multiselectService.findUnique(selectedValues.map(item => item.id));\n    // build selectedOptions array again\n    selectedValues = options.filter(o => selectedIds.indexOf(o.id) !== -1);\n    this.viewToModel(selectedValues);\n    this.onGroupItemClick.emit(group);\n  }\n\n  reset() {\n    this.viewToModel(this.initialValue);\n    this.prepopulateOptions(this.initialValue);\n    this.onReset.emit();\n  }\n\n  // Responsible for updating value from view to model\n  viewToModel(selected) {\n    if (this._selectedOptions !== selected) {\n      this._selectedOptions = selected;\n      this.onChange(selected);\n    }\n  }\n\n  clear(event){\n    let changedOptions = this.getOptions().map(o => ({...o, ticked: false}));\n    this.setOptions(changedOptions);\n    // no value is selected so passing null\n    this.viewToModel(null);\n    this.onClear.emit();\n    this.close();\n    event.stopPropagation();\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n  ngOnInit () {\n    // Check if value have not been assigned then default to true\n    if (typeof this._multiple === 'undefined') {\n      this.multiple = true;\n    }\n  }\n\n  // TODO: Consider creating a directive for this.\n  // TODO: Also convert below to be work for element specific\n  @HostListener('document:click', ['$event.target'])\n  clickOutSide(event) {\n    if (\n      this.isOpen &&\n      this.elementRef.nativeElement !== event &&\n      !this.multiselectService.closest(event, 'ngx-multiselect')\n    ) {\n      this.close();\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\nconst DOTS = ' ...';\n\n@Pipe({\n  name: 'displaySelectedValue',\n  pure: false\n})\nexport class DisplaySelectedValuePipe implements PipeTransform {\n  defaultMaxLabelCount: number = 3;\n  transform(value: any, maxLabelCount: number = this.defaultMaxLabelCount): any {\n    if (value instanceof Array) {\n\n      const collection = [...value];\n      var total = collection.length;\n      const condn = collection.length > maxLabelCount;\n      condn ? (collection.length = maxLabelCount) : null;\n\n      return `${collection.map(v => v.name).join(', ')}${condn ? DOTS + ' ('+total+')' : ''}`;\n    }\n    return value && value.name;\n  }\n}\n","import { Component, EventEmitter, Output, Input, ChangeDetectionStrategy } from '@angular/core';\n\n@Component({\n  selector: 'ms-helper-elements',\n  templateUrl: './helper-elements.component.html',\n  styleUrls: ['./helper-elements.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class HelperElementsComponent {\n  @Input() multiple = false;\n  @Input() disabled = false;\n\n  @Output() selectAllClicked = new EventEmitter();\n  @Output() selectNoneClicked = new EventEmitter();\n  @Output() resetClicked = new EventEmitter();\n\n  constructor() {}\n\n  selectAll() {\n    this.selectAllClicked.emit();\n  }\n\n  selectNone() {\n    this.selectNoneClicked.emit();\n  }\n\n  reset() {\n    this.resetClicked.emit();\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  EventEmitter,\n  Output,\n  ChangeDetectionStrategy,\n  TemplateRef,\n  ViewChild,\n  SimpleChanges,\n  OnChanges\n} from '@angular/core';\n\n@Component({\n  selector: 'ms-options',\n  templateUrl: './options.component.html',\n  styleUrls: ['./options.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class OptionsComponent implements OnInit, OnChanges {\n  _options: any[] = [];\n\n  @Input() disabled: boolean = false;\n  @Input() set options(value) {\n    this._options = value;\n  }\n  get() {\n    return this._options;\n  }\n  @Input() optionsTemplate: TemplateRef<any>;\n  @Output() selectOption = new EventEmitter<any>();\n\n  start: number = 0;\n  end: number = 5;\n  filteredOptions;\n\n  @ViewChild('defaultOptionsTemplate', { static: true }) defaultOptionsTemplate: TemplateRef<any>;\n\n  constructor() {}\n\n  getOptionStyle(option: any) {\n    return { marked: option.ticked, disabled: this.disabled || option.disabled };\n  }\n\n  select(option) {\n    this.selectOption.emit(option);\n  }\n\n  updateRange({ start, end }) {\n    this.filteredOptions = [...this._options].slice(start, end);\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { options } = changes;\n    if (!this.optionsTemplate) {\n      this.optionsTemplate = this.defaultOptionsTemplate;\n    }\n    if (options.currentValue !== options.previousValue) {\n      this.updateRange({ start: this.start, end: this.end });\n    }\n  }\n}\n","import {\n  Component,\n  OnInit,\n  Input,\n  ChangeDetectionStrategy,\n  Output,\n  EventEmitter,\n  TemplateRef,\n  ViewChild,\n  OnChanges\n} from '@angular/core';\nimport { NgxMultiselectService } from '../services/multiselect.service';\n\n@Component({\n  selector: 'ms-grouped-options',\n  templateUrl: './grouped-options.component.html',\n  styleUrls: ['./grouped-options.component.css'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class GroupedOptionsComponent implements OnInit, OnChanges {\n  _options = [];\n  _selectedOptions = [];\n  groupedOptions = [];\n  start: number = 0;\n  end: number = 5;\n  filteredOptions;\n\n  @Input() groupedProperty: string;\n  @Input() disabled = false;\n  @Input() multiple = false;\n  @Input() set selectedOptions(value) {\n    this._selectedOptions = value;\n    this.formGroupOptions(this._options, this._selectedOptions);\n  }\n  @Input() optionsTemplate: TemplateRef<any>;\n  @Input() set options(value) {\n    this._options = value;\n    this.formGroupOptions(value, this._selectedOptions);\n  }\n  get options() {\n    return this.groupedOptions;\n  }\n\n  @Output() selectGroup = new EventEmitter<any>();\n  @Output() selectOption = new EventEmitter<any>();\n\n  @ViewChild('defaultOptionsTemplate', { static: true }) defaultOptionsTemplate: TemplateRef<any>;\n\n  constructor(public multiselectService: NgxMultiselectService) {}\n\n  // TODO: Refactor below logic\n  formGroupOptions(collection, selectedOptions) {\n    let selectedIds = this.multiple ? \n      (selectedOptions || []).map(s => s.id) : \n        selectedOptions ? [selectedOptions.id]\n        :[];\n    const values = collection.map(v => ({ \n      ...v, \n      ticked: !v.isGroup ? selectedIds.indexOf(v.id) !== -1 : v.ticked\n     }));\n    this.groupedOptions = this.multiselectService.virtualOptionsGroupingFlatten(values, this.groupedProperty);\n    this.updateRange({ start: this.start, end: this.end });\n  }\n\n  getOptionStyle(option: any) {\n    return {\n      group: option.isGroup,\n      marked: option.ticked,\n      disabled: this.disabled || option.disabled\n    };\n  }\n\n  trackByFn(_, option) {\n    return option.id;\n  }\n\n  updateRange({ start, end }) {\n    this.start = start;\n    this.end = end;\n    this.filteredOptions = [...this.options].slice(start, end);\n  }\n\n  select(option) {\n    if (!option.isGroup) {\n      this.selectOption.emit(option);\n    } else {\n      option.ticked = !option.ticked;\n      const values = this.multiselectService.collectAllDescendants(this.options, this.groupedProperty, option.name);\n      this.selectGroup.emit({ \n        ...option,\n        values: values\n      });\n    }\n  }\n\n  ngOnInit() {\n  }\n\n  ngOnChanges() {\n    if (!this.optionsTemplate) {\n      this.optionsTemplate = this.defaultOptionsTemplate;\n    }\n  }\n}\n","import { Directive, HostListener, Input, ElementRef, Output, EventEmitter, Renderer2 } from '@angular/core';\n\n@Directive({\n  selector: '[msVirtualScroll]'\n})\nexport class VirtualScrollDirective {\n  private _totalCount: number;\n  top: HTMLElement;\n  bottom: HTMLElement;\n  scrollOffset = 0;\n  @Input() itemHeight: number = 40;\n  @Input() set totalCount(count) {\n    this._totalCount = count;\n    count ? this.initialSetup() : this.reset();\n  }\n  get() {\n    return this._totalCount;\n  }\n  @Output() rangeChanged = new EventEmitter<any>();\n  private scrollTimer;\n  private lastScrollFireTime = 0;\n  constructor(private el: ElementRef, private renderer: Renderer2) {}\n\n  reset() {\n    if (this.top && this.bottom) {\n      this.renderer.setStyle(this.top, 'height', 0);\n      this.renderer.setStyle(this.bottom, 'height', 0);\n      this.renderer.setProperty(this.el.nativeElement, 'scrollTop', 0);\n    }\n  }\n\n  throttleScroll(target) {\n    const { scrollTop, clientHeight } = target;\n    const totalHeight = this.itemHeight * this._totalCount + this.scrollOffset;\n\n    // Step: 1 - Calculate the position\n    const topSpacing = scrollTop;\n    const maxItemsRange = (clientHeight - this.scrollOffset) / this.itemHeight;\n\n    // Step: 2 - What are the possible collection that can be rendered\n    const rangeOffset = topSpacing % this.itemHeight;\n    const rangeStart = topSpacing - rangeOffset;\n    const topNonVisible = topSpacing / this.itemHeight;\n    const itemStartRange = Math.floor(topNonVisible);\n    const rangeToBeIncreamented = rangeOffset ? maxItemsRange + 1 : maxItemsRange;\n    const calculatedEndRange = itemStartRange + rangeToBeIncreamented;\n    const itemEndRange = calculatedEndRange >= this._totalCount ? this._totalCount : calculatedEndRange;\n    const bottomSpacing = totalHeight - (rangeStart + rangeToBeIncreamented * this.itemHeight);\n\n    // Step: 3 - Pass the range to the child directive\n    this.renderer.setStyle(this.top, 'height', `${rangeStart}px`);\n    this.renderer.setStyle(this.bottom, 'height', `${bottomSpacing}px`);\n    this.rangeChanged.emit({ start: itemStartRange, end: itemEndRange });\n  }\n\n  @HostListener('scroll', ['$event'])\n  onscroll({ target }) {\n    const minScrollTime = 50;\n    const now = new Date().getTime();\n    if (!this.scrollTimer) {\n      if (now - this.lastScrollFireTime > minScrollTime) {\n        this.lastScrollFireTime = now;\n      }\n      this.scrollTimer = setTimeout(() => {\n        this.scrollTimer = null;\n        this.lastScrollFireTime = new Date().getTime();\n        this.throttleScroll(target);\n      }, minScrollTime);\n    }\n  }\n\n  initialSetup() {\n    // TODO: later think of usng ViewChild, instead of direct DOM manipulation.\n    const { scrollTop, clientHeight } = this.el.nativeElement;\n    \n    this.top = this.renderer.selectRootElement('.top');\n    this.bottom = this.renderer.selectRootElement('.bottom');\n    this.renderer.setStyle(this.top, 'height', `${scrollTop}px`);\n    this.renderer.setStyle(this.bottom, 'height', `${this.itemHeight * this._totalCount + this.scrollOffset - clientHeight }px`);\n    this.renderer.setProperty(this.el.nativeElement, 'scrollTop', 0);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { NgxMultiselectComponent } from './multiselect.component';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { DisplaySelectedValuePipe } from './pipes/display-selected-value.pipe';\nimport { HelperElementsComponent } from './helper-elements/helper-elements.component';\nimport { FilterOptionsComponent } from './filter-options/filter-options.component';\nimport { OptionsComponent } from './options/options.component';\nimport { GroupedOptionsComponent } from './grouped-options/grouped-options.component';\nimport { VirtualScrollDirective } from './directives/virtual-scroll.directive';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule],\n  declarations: [\n    NgxMultiselectComponent,\n    DisplaySelectedValuePipe,\n    HelperElementsComponent,\n    FilterOptionsComponent,\n    OptionsComponent,\n    GroupedOptionsComponent,\n    VirtualScrollDirective\n  ],\n  exports: [NgxMultiselectComponent, DisplaySelectedValuePipe]\n})\nexport class NgxMultiselectModule {}\n"],"names":[],"mappings":"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"}